
# 前言

## 前端的低门槛？

前端是一个门槛越来越低的岗位，那些新人啊，可以快速来到这个行业，COPY/Paste 出类似的代码

### 深度：复杂应用的架构

如果只是前端应用来考虑，那大抵是只有少数的应用，可以称得上是复杂应用。这一类型的应用：

 - 可能存在复杂的业务逻辑
 - 可能是因为业务功能数量大，产生了大量的代码
 - 可能是技术实现上困难

这能归类到一级别的前端应用，数量并不多。

### 广度：更大领域的前端技术

从最近几年的趋势来看，还有一个趋势是，客户端融合，导致前端的快速融合，。

## 桌面浏览器

## 移动设备浏览器

## 嵌入式设备浏览器

# 写作的模式

1. 引子 ->

模式 - 你并不需要使用 Node.js 来写这样的功能。除非：

 -  你没有其它语言的开发技能
 - 使用前端技术、JavaScript 开发更快

2. 应用示例

3. 架构规划方案 ->


使用前端技术开发时，应该采用怎样的技术方案？

4. Demo 应用


5. 模式介绍 ->

在编写这样的技术栈时，你可以采用怎样的模式。诸如

Chrome 的发布-订阅者模式

# 大前端

> 大前端是指通过 Web 开发相关的技术（WebView、JavaScript/TypeScript）所能开发、处理的领域。除了包含传统的 Web 前端相比，大前端还包含了——后端（Node.js 如 BFF 层、Serverless）、HTML 5 游戏、物联网、嵌入式应用、移动应用、桌面应用。它的显著特性是：**一次开发，多种平台**。


## 大前端：写给大家看的渐进式前端发展指南

## 为什么是大前端

为什么不是大后端呢？

前端，即面向用户交互，存在一系列的方式。

前端在变窄，

### JavaScript 的神奇魔力

易学、广泛使用、熟悉的语法、

### 无处不在的 WebView

## 什么是大前端？？

> 大前端是指通过 Web 开发相关的技术（WebView、JavaScript/TypeScript）所能开发、处理的领域。除了包含传统的 Web 前端相比，大前端还包含了——后端（Node.js 如 BFF 层、Serverless）、HTML 5 游戏、物联网、嵌入式应用、移动应用、桌面应用。它的显著特性是：**一次开发，多种平台**。

值得注意的是：对于某些领域而言，大前端技术并不是最好的技术，但是它是实现起来最快的技术，也因此特别适合于 **MVP 原型构建**。与此同时，前端技术的动态特性，特别适合于远程更新业务——只需要更新对应的代码，而不需要更新整个应用。

若是就这样领域，在前端里，我们可以分为多个领域。

## 大前端的技术领域

### 前端中的 Web 前端

### 前端中的 GUI

前端是软件 GUI（图形用户界面）的一种形式。从传统的应用厂商，到互联网应用的迁移，我们便可以看到相关的变化。

### 前端中的游戏

### 前端中的物联网（IoT）

### 前端中的移动端

### 前端中的 AR/VR

## 如何成为大前端？


# 大前端：后端

所谓的前端 in 后端，便是**在后端开发中，使用前端相关的语言和技术栈**。最典型的场景，便是使用 Node.js 开发后端服务。虽然 Node.js 已经有了 10 年的历史了，但是以我（Phodal）的角度来看，我更希望的是使用编译型语言，来开发后端服务。动态语言，无法使用编译器来检测错误，难以约束代码变动。

## Node.js 打造后端服务

从社区的探索来看，存在一些完全使用 Node.js 开发的后台服务。但是，也存在一系列由于代码不规范造成的问题。从社区的经验来看，Node.js + Express + MongoDB + Angular/Vue/React，便是一些不错的选择。当然了，也有相当多的应用，只是采用了 Node.js 来完成 BFF 层（Backend For Frontends）。在这一层业务上，它只做业务数据的中间处理。

虽然，我经常建议在一些关键的节点上，不要采用 Node.js 来打造后台服务。可一旦涉及到 SPA 的服务端渲染，我们就不得不使用 Express、Koa 等这样的服务端 JavaScript/TypeScript 框架，来解决这样的问题。

## Serverless

> Serverless 架构是指大量依赖第三方服务（也叫做后端即服务，即“BaaS”）或暂存容器中运行的自定义代码（函数即服务，即“FaaS”）的应用程序，函数是无服务器架构中抽象语言运行时的最小单位。在这种架构中，我们并不看重运行一个函数需要多少 CPU 或 RAM 或任何其他资源，而是更看重运行函数所需的时间，我们也只为这些函数的运行时间付费。[^serverless]

[^serverless]: [https://serverless.ink/](https://serverless.ink/)

作为一种折中方案，也是我最喜欢的方案。Serverless 架构是指大量依赖第三方服务（也叫做后端即服务，即“BaaS”）或暂存容器中运行的自定义代码（函数即服务，即“FaaS”）的应用程序，函数是无服务器架构中抽象语言运行时的最小单位。

对于没有后台经验的前端开发人员来说，使用 Node.js 开发后端应用是一种相当大的挑战。大多数非科班的前端程序员，不知道从数据库到 RESTful API 的一系列操作，并且还需要了解到部署等一系列的系统底层知识。因此，使用 Serverless 这种不关心基础设施的技术，可以进一步地降低开发成本。


采用 Serverless 架构，也就意味着，我们提取出了大量的基础设施。而使用 Node.js + JavaScript 作为胶水，来快速连接不同的服务，以形成一个快速有效的方案。并且，编写更少的代码，也意味着更安全、快速。

使用 AWS 来运行大量的 Serverless 计算的成本很高，但是自己搭建一个 Serverless 服务器，来运行自己的 Serverless 应用，则变成了一种更廉价的方式。除了直接基于 AWS 的 Serverless Framework 框架的方案，还有 OpenFaaS、Kubeless、OpenWhisk、Fission 等不同的 Serverless 框架。

## BFF 层

> BFF，即 Backends For Frontends (服务于前端的后端)，也就是服务器设计 API 时会考虑客户端的使用情况，在服务端根据不同的设备类型，返回不同客户端所需要的结果。BFF 模式，这种模式不会为所有的客户端创建通用的 API。而是创建多个 BFF 服务：一个用于 Web 前端、一个用于移动客户端（甚至一个用于 iOS，另一个用于 Android）等等。[^aofe]

[^aofe]: 前端架构：从入门到微前端

# 大前端：IoT

Web 应用的架构相比于一个物联网系统，无非就是多了一层硬件层以及可选的协调层。

![IoT 层级](./images/iot-layers.png)


这个硬件层决定了物联网应用比Web应用更加复杂。对于大部分的Web应用来说 ，客户端都是手机、电脑、平板这些设备，都有着强大的处理能力，不需要考虑一些额外的因素。

对于物联网应用来说，我们需要考虑设备上的MCU的处理能力，根据其处理能力和使用环境使用不同的通信协议，如我们在一些设备上需要使用CoAP协议。在一些设备上不具备网络功能，需要考虑借助于可以联网的协助层，并且还需要使用一些短距离的无线传输协议，如低功耗蓝牙、红外、Zigbee等等。

## 传统的物联网

我毕业的时候，选定的毕业论文是一篇关于物联网的论文——《基于 REST 服务的最小物联网系统设计》。它是一篇入门级的论文，但凡是有 CS 基础的人，再加上一些硬件知识，都能写出这样的论文。不过我们的是毕业设计，论文反而有些其次，毕竟能不能过是以实物为主的。因此毕业设计动不动就要烧个几百 RMB，还不算服务器费用。然而，对于我们这些学习硬件为主的专业来说，就不是如此。

这篇论文是之前参加比赛的作品论文的“最小化”，里面使用到的主要就是创建RESTful服务，而它甚至称不上是一种技术。在这个作品里：

 * 我们使用Python语言里的Django框架作为Web服务框架，使用Django REST Framework来创建RESTful服务。
 * 为了使用手机当控制器，我们还要用Java写一个Android应用。
 * 我们使用Raspberry Pi作为硬件端的协调层，用于连接网络，并传输控制信号给硬件。在最初的设计里，因为便宜，我们打算使用运行OpenWRT的路由器来当硬件端的控制器。
 * 我们在硬件端使用Arduino作为控制器，写起代码特别简单，可以让我们关注于业务。
 * 我们还使用了Zigbee模块Xbee及I2C作为连接不同Arduino模块的的介质。
 * 最后，我们还需要在网页上做一个图表来显示实时数据。

所有的这些，我们需要使用Python、Java、JavaScript、C、Arduino五种语言。而如果我们要写相应的iOS应用，我们还需要Objective-C。

而同样的：

我刚实习的时候（2013 年），项目里使用的是 Backbone，作为单页面应用框架的核心来打造 Web 应用。这时，我开始关注于 Node.js，使用它实现物联网应用的可能性。当时，已经有了物联网协议 MQTT 和 CoAP 相关的库，便照猫画虎地写了一个支持 HTTP、CoAP、WebSocket 和 MQTT 的物联网。由于，当时缺乏一些大型应用的开发经典，所以做得并不是很好，但是已经可以看到 JavaScript 在这方面的远景。

一年多后，Ionic 也还没推出正式版，便发现到了这个框架真的很棒——它自带了一系列的 UI 组件，还用 NgCordova 封装了一系列  Cordova 的插件。便开始使用 Ionic 写了一些移动应用，发现还挺顺手的。接着，便拿这个框架尝试写物联网应用，这需要一些原生的插件，如 BLE、MQTT。后来，我也写了一个简单的 CoAP 插件。

后来，我们不再需要编译 Node.js（早期，使用的是 Raspberry Pi 来运行 Node.js），就可以在 ARM 处理器上运行 Node.js。并且我们已经有 Tessel、Espruino、Kinoma Create、Ruff 这些可以直接运行 JavaScript 的开发板。三星还推出 IoT.js，可以让更多的嵌入式设备，直接使用 JavaScript 作为开发语言。

人们开始在硬件上使用 JavaScript 的原因有很多，如 Web 的开发人员是最多的，而 JavaScript 很容易上手。

## 嵌入式设备分类

### 两种前端类型

#### 嵌入式设备作为服务端

诸如 ESP32 或者 ESP8266，它们可以和传统的 Web 应用一样，托管前端应用。

#### 嵌入式设备作为服务端和客户端

如 Android 系统中的

Android Things 相似的还有 Microsoft 10 IoT、Raspberry Pi

### 嵌入式设备分类

 - 低资源受限设备，只能使用传统的编译型语言编写，如 C、C++、汇编，
 - 

#### 低资源受限设备：编译型语言

它们只能使用

#### 普通嵌入式设备：

Android 是用得最多的嵌入式系统，。

OpenWRT 是用得最广泛的嵌入式系统之一，

在某些资源受限的设备上，我们无法运行一个带着完整 JavaScript 引擎的 WebView——出于软件体积、运行内存等因素的限制，去除了这些特性。诸如 CSS 3 中的动画特性，会占用大量的运算资源，算去掉了相应的支持。

## 固件编写

### Johnny-Five

### IoT.js

## Be Professinoal

### Arduino 与 Processing

### ESP866/ESP32 与 Lua

### C 语言

# 大前端：移动端

## 混合应用

依我的角度来看，使用什么跨平台框架来看，区别并不是太大。目前主流的方案，仍然是原生（含跨平台框架） + HTML5 应用。从业务的角度上来看待这个问题，那么还是希望，可以用 HTML 5 的地方多——更新功能方便。

也因此，虽然在过去，笔者写过基于 React Native 的混合应用框架 Dore。我相信：Flutter 也会出现这样的混合应用框架。不过，对于有原生开发能力的团队来说，它们的框架还会是三部分：

 * 原生功能部分
 * 原生 + H5 的频繁更新部分
 * Fultter 的跨平台部分

写业务嘛，框架都只是工具。

## 跨平台应用

### React Native

### Flutter

### Weex

## 小程序

小程序，即 HTML5 小程序，即无需安装即可下载运行的应用程序。与普通的移动 Web 应用不同的是，**小程序相当于是高阶版的混合应用**。

如果只是从这一点上来看，其实是不是和微信一样的定制型小程序，并不是那么重要。重要的，在于与原生**界面结合，并提供离线使用功能。**它也是小程序与普通的 HTML 应用的区别。

# 大前端：桌面应用

## 跨平台 WebView 应用框架

Electron/NW.js

## 跨平台框架

QT + WebView

# 大前端：VR/AR

## VR

## AR

# 大前端：数据可视化

在过去我阅读的一些书籍里面，主要是以 Processing 作为可视化的语言——它起始于 2001 年，它最初是面向美术工作者和设计者创建的，后来变成了全面的设计和原型工具，可以用于创建复杂数据可视化领域。

### 高级篇


### D3.js

# 大前端：游戏

随着移动端的性能不断变好，在 2019 年，我开始看好使用 HTML 5 技术来开发一些游戏。当然了，主要原因还是微信小游戏的出现。但是，不管怎样，我开始尝试在这个领域的探索。

## WebView 游戏

## JavaScript 语言游戏


# 大前端：前端

前端领域，在 2018 年已经趋于平衡，Angular、Vue、React 都没有出现太大的变化。

## Web 应用

### SPA （单页面应用）框架：A/V/R

架构选型上，也趋势于平衡。该用啥的还是用啥，偶尔还是会出现一些框架切换的新闻。尽管在 2019 年，会出现一些新的框架，但是还不太可能快引起变化。

### MPA （多页面应用）框架

## 语言

### TypeScript

TypeScript 真香。

前端，没什么好看——除了，娱乐新闻。

# 大前端：UI & UX

自诩是一个 “斜杠青年” 的我，为自己添加不同的 “title”，设计师/设计学徒便是其中的一个。

一来，作为一个前端开发人员，日常就是要和用户打交道。几年经验下来，多多少少也能积累点经验；二来，除了职业本身，我也是一个喜爱画画的人。只是受限于工作的影响，在这方面的投入便没有那么多。

也因此，这样一来，我们便也是能得到一些慰藉。

## 绘画

## 用户体验设计

## 图形界面设计


# 大前端：命令行接口

## 传统 CLI vs 跨平台 CLI

### 优势？

### 

## 相关实践和原则


Best Practise？

Mopass、ADR、Stepping，多多少少也算是写过一些 CLI。

除了此，使用 Node.js

Clone 代码，执行复制


一般型 Shell，如 ``git clone``

而跨平台，则是 ``fs.copy`` 而非 GNU/Linux 上的 ``cp``，又或者是 Windows 上的 ``xcopy``

相似的工具和语言有 Python 等

### 为什么是 Node.js

因为我们是个前端，相关的环境肯定是有的。只要是个前端开发，一定会有 Node.js 环境。


# 前端，永不止境

## 大前端架构


## 练习

